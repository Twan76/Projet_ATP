golem::run_dev()
ranking_atp <- read_html(URL_ATP_World_Tour_Race) %>%
html_nodes(xpath = '//*[@id="player-rank-detail-ajax"]')
library(dplyr)
library(textreadr)
library(stringr)
library(rvest)
library(tidyr)
library(purrr)
library(ggmap)
library(readr)
library(data.table)
library(lubridate)
URL_ATP_World_Tour_Race <- "https://www.atptour.com/en/rankings/singles-race-to-turin"
ranking_atp <- read_html(URL_ATP_World_Tour_Race) %>%
html_nodes(xpath = '//*[@id="player-rank-detail-ajax"]') %>%
html_table(fill = TRUE) %>% data.frame()
URL_ATP_World_Tour_Race
ranking_atp
ranking_atp <- read_html(URL_ATP_World_Tour_Race) %>%
html_nodes(xpath = '//*[@id="player-rank-detail-ajax"]')
ranking_atp
URL_ATP_World_Tour_Race <- "https://www.atptour.com/en/rankings/singles-race-to-turin"
ranking_atp_race <- read_html(URL_ATP_World_Tour_Race)
ranking_atp
ranking_atp_race
URL_ATP_World_Tour_Race <- "https://www.atptour.com/en/rankings/singles-race-to-turin"
ranking_atp_race <- read_html(URL_ATP_World_Tour_Race) %>%
html_nodes(xpath = '//*[@class="table"]')
ranking_atp_race
URL_ATP_World_Tour_Race <- "https://www.atptour.com/en/rankings/singles-race-to-turin"
ranking_atp_race <- read_html(URL_ATP_World_Tour_Race) %>%
html_nodes(xpath = '//*[@class="table"]') %>%
html_table(fill = TRUE) %>% data.frame()
ranking_atp_race
URL_ATP_World_Tour_Race <- "https://www.atptour.com/en/rankings/singles-race-to-turin"
ranking_atp_race <- read_html(URL_ATP_World_Tour_Race) %>%
html_nodes(xpath = '//*[@class="table"]') %>%
html_table(fill = TRUE)
ranking_atp_race
URL_ATP_World_Tour_Race <- "https://www.atptour.com/en/rankings/singles-race-to-turin"
ranking_atp_race <- read_html(URL_ATP_World_Tour_Race) %>%
html_nodes(xpath = '//*[@class="table"]')
ranking_atp_race
URL_ATP_World_Tour_Race <- "https://www.atptour.com/en/rankings/singles-race-to-turin?rankRange=All%20Rankings&countryCode=all"
ranking_atp_race <- read_html(URL_ATP_World_Tour_Race) %>%
html_nodes(xpath = '//*[@class="table"]')
ranking_atp_race
# Récupérer classements ATP 2022 (sortie chaque lundi)
x <- seq(as.Date("2022-01-01"), today(), by = "day")
lundis_2022 <- x[weekdays(x) == "lundi"]
y <- seq(ymd("2001-01-01"), today(), by="1 day")
lundis_mois_2001 <- y[weekdays(y) == "lundi" & day(y) <= 7]
i=1
ranking_atp <- read_html(paste0("https://www.atptour.com/en/rankings/singles?rankRange=1-5000&rankDate=",x[i]))
ranking_atp
ranking_atp <- read_html(paste0("https://www.atptour.com/en/rankings/singles?rankRange=1-5000&rankDate=",x[i])) %>%
html_nodes(xpath = '//*[@id="player-rank-detail-ajax"]')
ranking_atp
ranking_atp <- read_html(paste0("https://www.atptour.com/en/rankings/singles?rankRange=1-5000&rankDate=",x[i])) %>%
html_nodes(xpath = '//*[@id="player-rank-detail-ajax"]') %>%
html_table(fill = TRUE)
ranking_atp
i
x[1]
i=10
ranking_atp <- read_html(paste0("https://www.atptour.com/en/rankings/singles?rankRange=1-5000&rankDate=",x[i])) %>%
html_nodes(xpath = '//*[@id="player-rank-detail-ajax"]') %>%
html_table(fill = TRUE)
ranking_atp
ranking_atp <- read_html(paste0("https://www.atptour.com/en/rankings/singles?rankRange=1-5000&rankDate=",x[i])) %>%
html_nodes(xpath = '//*[@id="player-rank-detail-ajax"]')
ranking_atp
URL_ATP_World_Tour_Race <- "https://www.atptour.com/en/rankings/singles-race-to-turin?rankRange=All%20Rankings&countryCode=all"
ranking_atp_race <- read_html(URL_ATP_World_Tour_Race)
ranking_atp_race
URL_ATP_World_Tour_Race <- "https://www.atptour.com/en/rankings/singles-race-to-turin?rankRange=All%20Rankings&countryCode=all"
ranking_atp_race <- read_html(URL_ATP_World_Tour_Race) %>%
html_nodes(xpath = '//*[@class="row row--race"]')
ranking_atp_race
URL_ATP_World_Tour_Race <- "https://www.atptour.com/en/rankings/singles-race-to-turin?rankRange=All%20Rankings&countryCode=all"
ranking_atp_race <- read_html(URL_ATP_World_Tour_Race) %>%
html_nodes(xpath = '//*[@class="row row--race "]')
ranking_atp_race
URL_ATP_World_Tour_Race <- "https://www.atptour.com/en/rankings/singles-race-to-turin?rankRange=All%20Rankings&countryCode=all"
ranking_atp_race <- read_html(URL_ATP_World_Tour_Race) %>%
html_nodes(xpath = '//*[@class="row row--race  "]')
ranking_atp_race
URL_ATP_World_Tour_Race <- "https://www.atptour.com/en/rankings/singles-race-to-turin?rankRange=All%20Rankings&countryCode=all"
ranking_atp_race <- read_html(URL_ATP_World_Tour_Race) %>%
html_nodes(xpath = '//*[@class="row row--race  "]') %>%
html_table(fill = TRUE)
ranking_atp_race
URL_ATP_World_Tour_Race <- "https://www.atptour.com/en/rankings/singles-race-to-turin?rankRange=All%20Rankings&countryCode=all"
ranking_atp_race <- read_html(URL_ATP_World_Tour_Race) %>%
html_nodes(xpath = '//*[@class="row row--race  "]')
ranking_atp_race
ranking_atp_race[1]
ranking_atp_race <- read_html(URL_ATP_World_Tour_Race) %>%
html_nodes(xpath = '//*[@class="row row--race  "]') %>%
html_nodes("div")
ranking_atp_race
ranking_atp <- read_html(paste0("https://www.atptour.com/en/rankings/singles?rankRange=1-5000&rankDate=",x[i])) %>%
html_nodes(xpath = '//*[@id="player-rank-detail-ajax"]')
ranking_atp
ranking_atp <- read_html(paste0("https://www.atptour.com/en/rankings/singles?rankRange=1-5000&rankDate=",x[i])) %>%
html_nodes(xpath = '//*[@id="player-rank-detail-ajax"]') %>%
html_table(fill = TRUE)
ranking_atp
ranking_atp <- read_html(paste0("https://www.atptour.com/en/rankings/singles?rankRange=1-5000&rankDate=",x[i])) %>%
html_nodes(xpath = '//*[@id="player-rank-detail-ajax"]')
View(ranking_atp )
URL_ATP_World_Tour_Race <- "https://www.atptour.com/en/rankings/singles-race-to-turin?rankRange=All%20Rankings&countryCode=all"
ranking_atp_race <- read_html(URL_ATP_World_Tour_Race) %>%
html_nodes(xpath = '//*[@class="row row--race  "]') %>%
html_nodes("div") %>%
html_table(fill = TRUE)
ranking_atp_race
URL_ATP_World_Tour_Race <- "https://www.atptour.com/en/rankings/singles-race-to-turin?rankRange=All%20Rankings&countryCode=all"
ranking_atp_race <- read_html(URL_ATP_World_Tour_Race) %>%
html_nodes(xpath = '//*[@class="row row--race  "]') %>%
html_node("div")
ranking_atp_race
URL_ATP_World_Tour_Race <- "https://www.atptour.com/en/rankings/singles-race-to-turin?rankRange=All%20Rankings&countryCode=all"
ranking_atp_race <- read_html(URL_ATP_World_Tour_Race) %>%
html_nodes(xpath = '//*[@class="row row--race  "]') %>%
html_nodes("div > div")
ranking_atp_race
URL_ATP_World_Tour_Num1 <- "https://www.atptour.com/en/rankings/former-no-1s"
ranking_atp_num1 <- read_html(URL_ATP_World_Tour_Num1) %>%
html_nodes(xpath = '//*[@class="megatable"]') %>%
html_table(fill = TRUE) %>% data.frame()
URL_ATP_World_Tour_Num1
ranking_atp_num1
ranking_atp_num1 <- read_html(URL_ATP_World_Tour_Num1) %>%
html_nodes(xpath = '//*[@class="megatable"]')
ranking_atp_num1
ranking_atp_num1 <- read_html(URL_ATP_World_Tour_Num1)
ranking_atp_num1
ranking_atp_num1 <- read_html(URL_ATP_World_Tour_Num1) %>%
html_nodes(xpath = '//*[@class="mega-table"]') %>%
html_table(fill = TRUE) %>% data.frame()
ranking_atp_num1
player_country <- read_html(URL_ATP_World_Tour_Num1) %>%
html_nodes(xpath = '//*[@class="country-item"]') %>%
html_node("img") %>%
html_attr("alt") #Extract the redirect link for each player
player_country
ranking_atp_num1 <- ranking_atp_num1 %>% #Take the players data frame
mutate(player_country = player_country)
ranking_atp_num1
ranking_atp_num1 <- ranking_atp_num1[,c(1,7,3:6)]
ranking_atp_num1
URL_ATP_World_Tour_Num1 <- "https://www.atptour.com/en/rankings/former-no-1s"
ranking_atp_num1 <- read_html(URL_ATP_World_Tour_Num1) %>%
html_nodes(xpath = '//*[@class="mega-table"]') %>%
html_table(fill = TRUE) %>% data.frame()
player_country <- read_html(URL_ATP_World_Tour_Num1) %>%
html_nodes(xpath = '//*[@class="country-item"]') %>%
html_node("img") %>%
html_attr("alt") #Extract the redirect link for each player
# Recuperer lien joueur atp world tour
ranking_atp_num1 <- ranking_atp_num1 %>% #Take the players data frame
mutate(player_country = player_country)
ranking_atp_num1 <- ranking_atp_num1[,c(1,7,3:6)]
colnames(ranking_atp_num1) <- c("Rang","Pays", "Joueur", "Nombre Semaines N°1", "Nombre semaines consecutives N°1", "Nombre année N°1 fin année")
ranking_atp_num1[,1] <- as.integer(ranking_atp_num1[,1])
ranking_atp_num1[,4] <- as.integer(ranking_atp_num1[,4])
ranking_atp_num1[,5] <- as.integer(ranking_atp_num1[,5])
ranking_atp_num1[,6] <- as.integer(ranking_atp_num1[,6])
# Renommer les pays
ranking_atp_num1$Pays <- str_replace(ranking_atp_num1$Pays ,"AHO","Antilles Néerlandaises")
ranking_atp_num1$Pays <- str_replace(ranking_atp_num1$Pays ,"ALG","Algerie")
ranking_atp_num1$Pays <- str_replace(ranking_atp_num1$Pays ,"AND","Andorre")
ranking_atp_num1$Pays <- str_replace(ranking_atp_num1$Pays ,"ANT","Antigua et Barbuda")
ranking_atp_num1$Pays <- str_replace(ranking_atp_num1$Pays ,"ARG","Argentine")
ranking_atp_num1$Pays <- str_replace(ranking_atp_num1$Pays ,"ARM","Armenie")
ranking_atp_num1$Pays <- str_replace(ranking_atp_num1$Pays ,"ARU","Aruba")
ranking_atp_num1$Pays <- str_replace(ranking_atp_num1$Pays ,"AUS","Australie")
ranking_atp_num1$Pays <- str_replace(ranking_atp_num1$Pays ,"AUT","Autriche")
ranking_atp_num1$Pays <- str_replace(ranking_atp_num1$Pays ,"AZE","Azerbaidjan")
ranking_atp_num1$Pays <- str_replace(ranking_atp_num1$Pays ,"BAH","Bahamas")
ranking_atp_num1$Pays <- str_replace(ranking_atp_num1$Pays ,"BAR","Barbade")
ranking_atp_num1$Pays <- str_replace(ranking_atp_num1$Pays ,"BDI","Burundi")
ranking_atp_num1$Pays <- str_replace(ranking_atp_num1$Pays ,"BEL","Belgique")
ranking_atp_num1$Pays <- str_replace(ranking_atp_num1$Pays ,"BEN","Benin")
ranking_atp_num1$Pays <- str_replace(ranking_atp_num1$Pays ,"BER","Bermudes")
ranking_atp_num1$Pays <- str_replace(ranking_atp_num1$Pays ,"BIH","Bosnie Herzegovine")
ranking_atp_num1$Pays <- str_replace(ranking_atp_num1$Pays ,"BLR","Bielorussie")
ranking_atp_num1$Pays <- str_replace(ranking_atp_num1$Pays ,"BOL","Bolivie")
ranking_atp_num1$Pays <- str_replace(ranking_atp_num1$Pays ,"BOT","Botswana")
ranking_atp_num1$Pays <- str_replace(ranking_atp_num1$Pays ,"BRA","Bresil")
ranking_atp_num1$Pays <- str_replace(ranking_atp_num1$Pays ,"BRN","Brunei")
ranking_atp_num1$Pays <- str_replace(ranking_atp_num1$Pays ,"BUL","Bulgarie")
ranking_atp_num1$Pays <- str_replace(ranking_atp_num1$Pays ,"BUR","Burkina Faso")
ranking_atp_num1$Pays <- str_replace(ranking_atp_num1$Pays ,"CAM","Cambodge")
ranking_atp_num1$Pays <- str_replace(ranking_atp_num1$Pays ,"CAN","Canada")
ranking_atp_num1$Pays <- str_replace(ranking_atp_num1$Pays ,"CAY","Iles Caymans")
ranking_atp_num1$Pays <- str_replace(ranking_atp_num1$Pays ,"CHI","Chili")
ranking_atp_num1$Pays <- str_replace(ranking_atp_num1$Pays ,"CHN","Chine")
ranking_atp_num1$Pays <- str_replace(ranking_atp_num1$Pays ,"CIV","Cote d'Ivoire")
ranking_atp_num1$Pays <- str_replace(ranking_atp_num1$Pays ,"CMR","Cameroun")
ranking_atp_num1$Pays <- str_replace(ranking_atp_num1$Pays ,"COD","Republique democratique du Congo")
ranking_atp_num1$Pays <- str_replace(ranking_atp_num1$Pays ,"COL","Colombie")
ranking_atp_num1$Pays <- str_replace(ranking_atp_num1$Pays ,"CRC","Costa Rica")
ranking_atp_num1$Pays <- str_replace(ranking_atp_num1$Pays ,"CRO","Croatie")
ranking_atp_num1$Pays <- str_replace(ranking_atp_num1$Pays ,"CUB","Cuba")
ranking_atp_num1$Pays <- str_replace(ranking_atp_num1$Pays ,"CUW","Curacao")
ranking_atp_num1$Pays <- str_replace(ranking_atp_num1$Pays ,"CYP","Chypre")
ranking_atp_num1$Pays <- str_replace(ranking_atp_num1$Pays ,"CZE","Republique Tcheque")
ranking_atp_num1$Pays <- str_replace(ranking_atp_num1$Pays ,"DEN","Danemark")
ranking_atp_num1$Pays <- str_replace(ranking_atp_num1$Pays ,"DOM","Republique Dominicaine")
ranking_atp_num1$Pays <- str_replace(ranking_atp_num1$Pays ,"ECU","Equateur")
ranking_atp_num1$Pays <- str_replace(ranking_atp_num1$Pays ,"EGY","Egypte")
ranking_atp_num1$Pays <- str_replace(ranking_atp_num1$Pays ,"ESA","Salvador")
ranking_atp_num1$Pays <- str_replace(ranking_atp_num1$Pays ,"ESP","Espagne")
ranking_atp_num1$Pays <- str_replace(ranking_atp_num1$Pays ,"EST","Estonie")
ranking_atp_num1$Pays <- str_replace(ranking_atp_num1$Pays ,"FIN","Finlande")
ranking_atp_num1$Pays <- str_replace(ranking_atp_num1$Pays ,"FRA","France")
ranking_atp_num1$Pays <- str_replace(ranking_atp_num1$Pays ,"GAB","Gabon")
ranking_atp_num1$Pays <- str_replace(ranking_atp_num1$Pays ,"GBR","Grande-Bretagne")
ranking_atp_num1$Pays <- str_replace(ranking_atp_num1$Pays ,"GEO","Georgie")
ranking_atp_num1$Pays <- str_replace(ranking_atp_num1$Pays ,"GER","Allemagne")
ranking_atp_num1$Pays <- str_replace(ranking_atp_num1$Pays ,"GHA","Ghana")
ranking_atp_num1$Pays <- str_replace(ranking_atp_num1$Pays ,"GRE","Grece")
ranking_atp_num1$Pays <- str_replace(ranking_atp_num1$Pays ,"GUA","Guatemala")
ranking_atp_num1$Pays <- str_replace(ranking_atp_num1$Pays ,"GUD","Guadeloupe")
ranking_atp_num1$Pays <- str_replace(ranking_atp_num1$Pays ,"GUM","Guam")
ranking_atp_num1$Pays <- str_replace(ranking_atp_num1$Pays ,"HAI","Haiti")
ranking_atp_num1$Pays <- str_replace(ranking_atp_num1$Pays ,"HKG","Hong Kong")
ranking_atp_num1$Pays <- str_replace(ranking_atp_num1$Pays ,"HUN","Hongrie")
ranking_atp_num1$Pays <- str_replace(ranking_atp_num1$Pays ,"INA","Indonesie")
ranking_atp_num1$Pays <- str_replace(ranking_atp_num1$Pays ,"IND","Inde")
ranking_atp_num1$Pays <- str_replace(ranking_atp_num1$Pays ,"IRI","Iran")
ranking_atp_num1$Pays <- str_replace(ranking_atp_num1$Pays ,"IRL","Irelande")
ranking_atp_num1$Pays <- str_replace(ranking_atp_num1$Pays ,"ISL","Icelande")
ranking_atp_num1$Pays <- str_replace(ranking_atp_num1$Pays ,"ISR","Israel")
ranking_atp_num1$Pays <- str_replace(ranking_atp_num1$Pays ,"ISV","Iles Vierges")
ranking_atp_num1$Pays <- str_replace(ranking_atp_num1$Pays ,"ITA","Italie")
ranking_atp_num1$Pays <- str_replace(ranking_atp_num1$Pays ,"JAM","Jamaique")
ranking_atp_num1$Pays <- str_replace(ranking_atp_num1$Pays ,"JOR","Jordanie")
ranking_atp_num1$Pays <- str_replace(ranking_atp_num1$Pays ,"JPN","Japon")
ranking_atp_num1$Pays <- str_replace(ranking_atp_num1$Pays ,"KAZ","Kazakhstan")
ranking_atp_num1$Pays <- str_replace(ranking_atp_num1$Pays ,"KEN","Kenya")
ranking_atp_num1$Pays <- str_replace(ranking_atp_num1$Pays ,"KGZ","Kyrgyzstan")
ranking_atp_num1$Pays <- str_replace(ranking_atp_num1$Pays ,"KOR","Corée du Sud")
ranking_atp_num1$Pays <- str_replace(ranking_atp_num1$Pays ,"KSA","Arabie Saoudite")
ranking_atp_num1$Pays <- str_replace(ranking_atp_num1$Pays ,"KUW","Koweit")
ranking_atp_num1$Pays <- str_replace(ranking_atp_num1$Pays ,"LAT","Lettonie")
ranking_atp_num1$Pays <- str_replace(ranking_atp_num1$Pays ,"LIB","Liban")
ranking_atp_num1$Pays <- str_replace(ranking_atp_num1$Pays ,"LIE","Liechenstein")
ranking_atp_num1$Pays <- str_replace(ranking_atp_num1$Pays ,"LTU","Lituanie")
ranking_atp_num1$Pays <- str_replace(ranking_atp_num1$Pays ,"LUX","Luxembourg")
ranking_atp_num1$Pays <- str_replace(ranking_atp_num1$Pays ,"MAD","Madagascar")
ranking_atp_num1$Pays <- str_replace(ranking_atp_num1$Pays ,"MAR","Maroc")
ranking_atp_num1$Pays <- str_replace(ranking_atp_num1$Pays ,"MAS","Malaysie")
ranking_atp_num1$Pays <- str_replace(ranking_atp_num1$Pays ,"MDA","Moldovie")
ranking_atp_num1$Pays <- str_replace(ranking_atp_num1$Pays ,"MEX","Mexique")
ranking_atp_num1$Pays <- str_replace(ranking_atp_num1$Pays ,"MKD","Macédoine du Nord")
ranking_atp_num1$Pays <- str_replace(ranking_atp_num1$Pays ,"MLI","Mali")
ranking_atp_num1$Pays <- str_replace(ranking_atp_num1$Pays ,"MLT","Malte")
ranking_atp_num1$Pays <- str_replace(ranking_atp_num1$Pays ,"MNE","Montenegro")
ranking_atp_num1$Pays <- str_replace(ranking_atp_num1$Pays ,"MON","Monaco")
ranking_atp_num1$Pays <- str_replace(ranking_atp_num1$Pays ,"MRI","Ile Maurice")
ranking_atp_num1$Pays <- str_replace(ranking_atp_num1$Pays ,"NAM","Namibie")
ranking_atp_num1$Pays <- str_replace(ranking_atp_num1$Pays ,"NED","Pays-Bas")
ranking_atp_num1$Pays <- str_replace(ranking_atp_num1$Pays ,"NGR","Nigeria")
ranking_atp_num1$Pays <- str_replace(ranking_atp_num1$Pays ,"NMI","Iles Mariannes du Nord")
ranking_atp_num1$Pays <- str_replace(ranking_atp_num1$Pays ,"NOR","Norvege")
ranking_atp_num1$Pays <- str_replace(ranking_atp_num1$Pays ,"NZL","Nouvelle-Zelande")
ranking_atp_num1$Pays <- str_replace(ranking_atp_num1$Pays ,"OMA","Oman")
ranking_atp_num1$Pays <- str_replace(ranking_atp_num1$Pays ,"PAK","Pakistan")
ranking_atp_num1$Pays <- str_replace(ranking_atp_num1$Pays ,"PAN","Panama")
ranking_atp_num1$Pays <- str_replace(ranking_atp_num1$Pays ,"PAR","Paraguay")
ranking_atp_num1$Pays <- str_replace(ranking_atp_num1$Pays ,"PER","Perou")
ranking_atp_num1$Pays <- str_replace(ranking_atp_num1$Pays ,"PHI","Philippines")
ranking_atp_num1$Pays <- str_replace(ranking_atp_num1$Pays ,"POL","Pologne")
ranking_atp_num1$Pays <- str_replace(ranking_atp_num1$Pays ,"POR","Portugal")
ranking_atp_num1$Pays <- str_replace(ranking_atp_num1$Pays ,"PUR","Porto Rico")
ranking_atp_num1$Pays <- str_replace(ranking_atp_num1$Pays ,"QAT","Qatar")
ranking_atp_num1$Pays <- str_replace(ranking_atp_num1$Pays ,"ROM","Roumanie")
ranking_atp_num1$Pays <- str_replace(ranking_atp_num1$Pays ,"ROU","Roumanie")
ranking_atp_num1$Pays <- str_replace(ranking_atp_num1$Pays ,"RSA","Afrique du Sud")
ranking_atp_num1$Pays <- str_replace(ranking_atp_num1$Pays ,"RUS","Russie")
ranking_atp_num1$Pays <- str_replace(ranking_atp_num1$Pays ,"RWA","Rwanda")
ranking_atp_num1$Pays <- str_replace(ranking_atp_num1$Pays ,"SEN","Senegal")
ranking_atp_num1$Pays <- str_replace(ranking_atp_num1$Pays ,"SGP","Singapour")
ranking_atp_num1$Pays <- str_replace(ranking_atp_num1$Pays ,"SIN","Singapour")
ranking_atp_num1$Pays <- str_replace(ranking_atp_num1$Pays ,"SLE","Sierra Leone")
ranking_atp_num1$Pays <- str_replace(ranking_atp_num1$Pays ,"SLO","Slovenie")
ranking_atp_num1$Pays <- str_replace(ranking_atp_num1$Pays ,"SMR","San Marin")
ranking_atp_num1$Pays <- str_replace(ranking_atp_num1$Pays ,"SOL","Iles Salomons")
ranking_atp_num1$Pays <- str_replace(ranking_atp_num1$Pays ,"SRB","Serbie")
ranking_atp_num1$Pays <- str_replace(ranking_atp_num1$Pays ,"SRI","Sri Lanka")
ranking_atp_num1$Pays <- str_replace(ranking_atp_num1$Pays ,"SUD","Soudan")
ranking_atp_num1$Pays <- str_replace(ranking_atp_num1$Pays ,"SUI","Suisse")
ranking_atp_num1$Pays <- str_replace(ranking_atp_num1$Pays ,"SVK","Slovaquie")
ranking_atp_num1$Pays <- str_replace(ranking_atp_num1$Pays ,"SWE","Suede")
ranking_atp_num1$Pays <- str_replace(ranking_atp_num1$Pays ,"SYR","Syrie")
ranking_atp_num1$Pays <- str_replace(ranking_atp_num1$Pays ,"TAN","Tanzanie")
ranking_atp_num1$Pays <- str_replace(ranking_atp_num1$Pays ,"THA","Thailande")
ranking_atp_num1$Pays <- str_replace(ranking_atp_num1$Pays ,"TJK","Tadjikistan")
ranking_atp_num1$Pays <- str_replace(ranking_atp_num1$Pays ,"TKM","Turkmenistan")
ranking_atp_num1$Pays <- str_replace(ranking_atp_num1$Pays ,"TOG","Togo")
ranking_atp_num1$Pays <- str_replace(ranking_atp_num1$Pays ,"TPE","Taipei")
ranking_atp_num1$Pays <- str_replace(ranking_atp_num1$Pays ,"TTO","Trinidad et Tobago")
ranking_atp_num1$Pays <- str_replace(ranking_atp_num1$Pays ,"TUN","Tunisie")
ranking_atp_num1$Pays <- str_replace(ranking_atp_num1$Pays ,"TUR","Turquie")
ranking_atp_num1$Pays <- str_replace(ranking_atp_num1$Pays ,"UAE","Emirats Arabes Unis")
ranking_atp_num1$Pays <- str_replace(ranking_atp_num1$Pays ,"UGA","Ouganda")
ranking_atp_num1$Pays <- str_replace(ranking_atp_num1$Pays ,"UKR","Ukraine")
ranking_atp_num1$Pays <- str_replace(ranking_atp_num1$Pays ,"URU","Uruguay")
ranking_atp_num1$Pays <- str_replace(ranking_atp_num1$Pays ,"USA","Etats-Unis")
ranking_atp_num1$Pays <- str_replace(ranking_atp_num1$Pays ,"UZB","Ouzbekistan")
ranking_atp_num1$Pays <- str_replace(ranking_atp_num1$Pays ,"VEN","Venezuela")
ranking_atp_num1$Pays <- str_replace(ranking_atp_num1$Pays ,"VIE","Vietnam")
ranking_atp_num1$Pays <- str_replace(ranking_atp_num1$Pays ,"YUG","Yougoslavie")
ranking_atp_num1$Pays <- str_replace(ranking_atp_num1$Pays ,"ZIM","Zimbabwe")
ranking_atp_num1
ranking_atp_num1_df <- readr::read_rds("ranking_atp_num1.rds")
write_rds(ranking_atp_num1, "ranking_atp_num1.rds")
ranking_atp_num1_df <- readr::read_rds("ranking_atp_num1.rds")
golem::add_module(name = "afficher_table_num1", with_test = TRUE) # Name of the module
golem::run_dev()
ranking_atp_num1_df
ranking_atp_num1_df
golem::run_dev()
golem::run_dev()
# Recuperer lien joueur atp world tour
ranking_atp_num1 <- ranking_atp_num1 %>% #Take the players data frame
mutate(player_country = player_country)
library(dplyr)
library(textreadr)
library(stringr)
library(rvest)
library(tidyr)
library(purrr)
library(ggmap)
library(readr)
library(data.table)
library(lubridate)
# Recuperer lien joueur atp world tour
ranking_atp_num1 <- ranking_atp_num1 %>% #Take the players data frame
mutate(player_country = player_country)
URL_ATP_World_Tour_Num1 <- "https://www.atptour.com/en/rankings/former-no-1s"
ranking_atp_num1 <- read_html(URL_ATP_World_Tour_Num1) %>%
html_nodes(xpath = '//*[@class="mega-table"]') %>%
html_table(fill = TRUE) %>% data.frame()
player_country <- read_html(URL_ATP_World_Tour_Num1) %>%
html_nodes(xpath = '//*[@class="country-item"]') %>%
html_node("img") %>%
html_attr("alt") #Extract the redirect link for each player
# Recuperer lien joueur atp world tour
ranking_atp_num1 <- ranking_atp_num1 %>% #Take the players data frame
mutate(player_country = player_country)
ranking_atp_num1 <- ranking_atp_num1[,c(1,7,3:6)]
colnames(ranking_atp_num1) <- c("Rang","Pays", "Joueur", "Nombre semaines N°1", "Nombre semaines consécutives N°1", "Nombre fin d'années N°1")
ranking_atp_num1[,1] <- as.integer(ranking_atp_num1[,1])
ranking_atp_num1[,4] <- as.integer(ranking_atp_num1[,4])
ranking_atp_num1[,5] <- as.integer(ranking_atp_num1[,5])
ranking_atp_num1[,6] <- as.integer(ranking_atp_num1[,6])
# Renommer les pays
ranking_atp_num1$Pays <- str_replace(ranking_atp_num1$Pays ,"AHO","Antilles Néerlandaises")
ranking_atp_num1$Pays <- str_replace(ranking_atp_num1$Pays ,"ALG","Algerie")
ranking_atp_num1$Pays <- str_replace(ranking_atp_num1$Pays ,"AND","Andorre")
ranking_atp_num1$Pays <- str_replace(ranking_atp_num1$Pays ,"ANT","Antigua et Barbuda")
ranking_atp_num1$Pays <- str_replace(ranking_atp_num1$Pays ,"ARG","Argentine")
ranking_atp_num1$Pays <- str_replace(ranking_atp_num1$Pays ,"ARM","Armenie")
ranking_atp_num1$Pays <- str_replace(ranking_atp_num1$Pays ,"ARU","Aruba")
ranking_atp_num1$Pays <- str_replace(ranking_atp_num1$Pays ,"AUS","Australie")
ranking_atp_num1$Pays <- str_replace(ranking_atp_num1$Pays ,"AUT","Autriche")
ranking_atp_num1$Pays <- str_replace(ranking_atp_num1$Pays ,"AZE","Azerbaidjan")
ranking_atp_num1$Pays <- str_replace(ranking_atp_num1$Pays ,"BAH","Bahamas")
ranking_atp_num1$Pays <- str_replace(ranking_atp_num1$Pays ,"BAR","Barbade")
ranking_atp_num1$Pays <- str_replace(ranking_atp_num1$Pays ,"BDI","Burundi")
ranking_atp_num1$Pays <- str_replace(ranking_atp_num1$Pays ,"BEL","Belgique")
ranking_atp_num1$Pays <- str_replace(ranking_atp_num1$Pays ,"BEN","Benin")
ranking_atp_num1$Pays <- str_replace(ranking_atp_num1$Pays ,"BER","Bermudes")
ranking_atp_num1$Pays <- str_replace(ranking_atp_num1$Pays ,"BIH","Bosnie Herzegovine")
ranking_atp_num1$Pays <- str_replace(ranking_atp_num1$Pays ,"BLR","Bielorussie")
ranking_atp_num1$Pays <- str_replace(ranking_atp_num1$Pays ,"BOL","Bolivie")
ranking_atp_num1$Pays <- str_replace(ranking_atp_num1$Pays ,"BOT","Botswana")
ranking_atp_num1$Pays <- str_replace(ranking_atp_num1$Pays ,"BRA","Bresil")
ranking_atp_num1$Pays <- str_replace(ranking_atp_num1$Pays ,"BRN","Brunei")
ranking_atp_num1$Pays <- str_replace(ranking_atp_num1$Pays ,"BUL","Bulgarie")
ranking_atp_num1$Pays <- str_replace(ranking_atp_num1$Pays ,"BUR","Burkina Faso")
ranking_atp_num1$Pays <- str_replace(ranking_atp_num1$Pays ,"CAM","Cambodge")
ranking_atp_num1$Pays <- str_replace(ranking_atp_num1$Pays ,"CAN","Canada")
ranking_atp_num1$Pays <- str_replace(ranking_atp_num1$Pays ,"CAY","Iles Caymans")
ranking_atp_num1$Pays <- str_replace(ranking_atp_num1$Pays ,"CHI","Chili")
ranking_atp_num1$Pays <- str_replace(ranking_atp_num1$Pays ,"CHN","Chine")
ranking_atp_num1$Pays <- str_replace(ranking_atp_num1$Pays ,"CIV","Cote d'Ivoire")
ranking_atp_num1$Pays <- str_replace(ranking_atp_num1$Pays ,"CMR","Cameroun")
ranking_atp_num1$Pays <- str_replace(ranking_atp_num1$Pays ,"COD","Republique democratique du Congo")
ranking_atp_num1$Pays <- str_replace(ranking_atp_num1$Pays ,"COL","Colombie")
ranking_atp_num1$Pays <- str_replace(ranking_atp_num1$Pays ,"CRC","Costa Rica")
ranking_atp_num1$Pays <- str_replace(ranking_atp_num1$Pays ,"CRO","Croatie")
ranking_atp_num1$Pays <- str_replace(ranking_atp_num1$Pays ,"CUB","Cuba")
ranking_atp_num1$Pays <- str_replace(ranking_atp_num1$Pays ,"CUW","Curacao")
ranking_atp_num1$Pays <- str_replace(ranking_atp_num1$Pays ,"CYP","Chypre")
ranking_atp_num1$Pays <- str_replace(ranking_atp_num1$Pays ,"CZE","Republique Tcheque")
ranking_atp_num1$Pays <- str_replace(ranking_atp_num1$Pays ,"DEN","Danemark")
ranking_atp_num1$Pays <- str_replace(ranking_atp_num1$Pays ,"DOM","Republique Dominicaine")
ranking_atp_num1$Pays <- str_replace(ranking_atp_num1$Pays ,"ECU","Equateur")
ranking_atp_num1$Pays <- str_replace(ranking_atp_num1$Pays ,"EGY","Egypte")
ranking_atp_num1$Pays <- str_replace(ranking_atp_num1$Pays ,"ESA","Salvador")
ranking_atp_num1$Pays <- str_replace(ranking_atp_num1$Pays ,"ESP","Espagne")
ranking_atp_num1$Pays <- str_replace(ranking_atp_num1$Pays ,"EST","Estonie")
ranking_atp_num1$Pays <- str_replace(ranking_atp_num1$Pays ,"FIN","Finlande")
ranking_atp_num1$Pays <- str_replace(ranking_atp_num1$Pays ,"FRA","France")
ranking_atp_num1$Pays <- str_replace(ranking_atp_num1$Pays ,"GAB","Gabon")
ranking_atp_num1$Pays <- str_replace(ranking_atp_num1$Pays ,"GBR","Grande-Bretagne")
ranking_atp_num1$Pays <- str_replace(ranking_atp_num1$Pays ,"GEO","Georgie")
ranking_atp_num1$Pays <- str_replace(ranking_atp_num1$Pays ,"GER","Allemagne")
ranking_atp_num1$Pays <- str_replace(ranking_atp_num1$Pays ,"GHA","Ghana")
ranking_atp_num1$Pays <- str_replace(ranking_atp_num1$Pays ,"GRE","Grece")
ranking_atp_num1$Pays <- str_replace(ranking_atp_num1$Pays ,"GUA","Guatemala")
ranking_atp_num1$Pays <- str_replace(ranking_atp_num1$Pays ,"GUD","Guadeloupe")
ranking_atp_num1$Pays <- str_replace(ranking_atp_num1$Pays ,"GUM","Guam")
ranking_atp_num1$Pays <- str_replace(ranking_atp_num1$Pays ,"HAI","Haiti")
ranking_atp_num1$Pays <- str_replace(ranking_atp_num1$Pays ,"HKG","Hong Kong")
ranking_atp_num1$Pays <- str_replace(ranking_atp_num1$Pays ,"HUN","Hongrie")
ranking_atp_num1$Pays <- str_replace(ranking_atp_num1$Pays ,"INA","Indonesie")
ranking_atp_num1$Pays <- str_replace(ranking_atp_num1$Pays ,"IND","Inde")
ranking_atp_num1$Pays <- str_replace(ranking_atp_num1$Pays ,"IRI","Iran")
ranking_atp_num1$Pays <- str_replace(ranking_atp_num1$Pays ,"IRL","Irelande")
ranking_atp_num1$Pays <- str_replace(ranking_atp_num1$Pays ,"ISL","Icelande")
ranking_atp_num1$Pays <- str_replace(ranking_atp_num1$Pays ,"ISR","Israel")
ranking_atp_num1$Pays <- str_replace(ranking_atp_num1$Pays ,"ISV","Iles Vierges")
ranking_atp_num1$Pays <- str_replace(ranking_atp_num1$Pays ,"ITA","Italie")
ranking_atp_num1$Pays <- str_replace(ranking_atp_num1$Pays ,"JAM","Jamaique")
ranking_atp_num1$Pays <- str_replace(ranking_atp_num1$Pays ,"JOR","Jordanie")
ranking_atp_num1$Pays <- str_replace(ranking_atp_num1$Pays ,"JPN","Japon")
ranking_atp_num1$Pays <- str_replace(ranking_atp_num1$Pays ,"KAZ","Kazakhstan")
ranking_atp_num1$Pays <- str_replace(ranking_atp_num1$Pays ,"KEN","Kenya")
ranking_atp_num1$Pays <- str_replace(ranking_atp_num1$Pays ,"KGZ","Kyrgyzstan")
ranking_atp_num1$Pays <- str_replace(ranking_atp_num1$Pays ,"KOR","Corée du Sud")
ranking_atp_num1$Pays <- str_replace(ranking_atp_num1$Pays ,"KSA","Arabie Saoudite")
ranking_atp_num1$Pays <- str_replace(ranking_atp_num1$Pays ,"KUW","Koweit")
ranking_atp_num1$Pays <- str_replace(ranking_atp_num1$Pays ,"LAT","Lettonie")
ranking_atp_num1$Pays <- str_replace(ranking_atp_num1$Pays ,"LIB","Liban")
ranking_atp_num1$Pays <- str_replace(ranking_atp_num1$Pays ,"LIE","Liechenstein")
ranking_atp_num1$Pays <- str_replace(ranking_atp_num1$Pays ,"LTU","Lituanie")
ranking_atp_num1$Pays <- str_replace(ranking_atp_num1$Pays ,"LUX","Luxembourg")
ranking_atp_num1$Pays <- str_replace(ranking_atp_num1$Pays ,"MAD","Madagascar")
ranking_atp_num1$Pays <- str_replace(ranking_atp_num1$Pays ,"MAR","Maroc")
ranking_atp_num1$Pays <- str_replace(ranking_atp_num1$Pays ,"MAS","Malaysie")
ranking_atp_num1$Pays <- str_replace(ranking_atp_num1$Pays ,"MDA","Moldovie")
ranking_atp_num1$Pays <- str_replace(ranking_atp_num1$Pays ,"MEX","Mexique")
ranking_atp_num1$Pays <- str_replace(ranking_atp_num1$Pays ,"MKD","Macédoine du Nord")
ranking_atp_num1$Pays <- str_replace(ranking_atp_num1$Pays ,"MLI","Mali")
ranking_atp_num1$Pays <- str_replace(ranking_atp_num1$Pays ,"MLT","Malte")
ranking_atp_num1$Pays <- str_replace(ranking_atp_num1$Pays ,"MNE","Montenegro")
ranking_atp_num1$Pays <- str_replace(ranking_atp_num1$Pays ,"MON","Monaco")
ranking_atp_num1$Pays <- str_replace(ranking_atp_num1$Pays ,"MRI","Ile Maurice")
ranking_atp_num1$Pays <- str_replace(ranking_atp_num1$Pays ,"NAM","Namibie")
ranking_atp_num1$Pays <- str_replace(ranking_atp_num1$Pays ,"NED","Pays-Bas")
ranking_atp_num1$Pays <- str_replace(ranking_atp_num1$Pays ,"NGR","Nigeria")
ranking_atp_num1$Pays <- str_replace(ranking_atp_num1$Pays ,"NMI","Iles Mariannes du Nord")
ranking_atp_num1$Pays <- str_replace(ranking_atp_num1$Pays ,"NOR","Norvege")
ranking_atp_num1$Pays <- str_replace(ranking_atp_num1$Pays ,"NZL","Nouvelle-Zelande")
ranking_atp_num1$Pays <- str_replace(ranking_atp_num1$Pays ,"OMA","Oman")
ranking_atp_num1$Pays <- str_replace(ranking_atp_num1$Pays ,"PAK","Pakistan")
ranking_atp_num1$Pays <- str_replace(ranking_atp_num1$Pays ,"PAN","Panama")
ranking_atp_num1$Pays <- str_replace(ranking_atp_num1$Pays ,"PAR","Paraguay")
ranking_atp_num1$Pays <- str_replace(ranking_atp_num1$Pays ,"PER","Perou")
ranking_atp_num1$Pays <- str_replace(ranking_atp_num1$Pays ,"PHI","Philippines")
ranking_atp_num1$Pays <- str_replace(ranking_atp_num1$Pays ,"POL","Pologne")
ranking_atp_num1$Pays <- str_replace(ranking_atp_num1$Pays ,"POR","Portugal")
ranking_atp_num1$Pays <- str_replace(ranking_atp_num1$Pays ,"PUR","Porto Rico")
ranking_atp_num1$Pays <- str_replace(ranking_atp_num1$Pays ,"QAT","Qatar")
ranking_atp_num1$Pays <- str_replace(ranking_atp_num1$Pays ,"ROM","Roumanie")
ranking_atp_num1$Pays <- str_replace(ranking_atp_num1$Pays ,"ROU","Roumanie")
ranking_atp_num1$Pays <- str_replace(ranking_atp_num1$Pays ,"RSA","Afrique du Sud")
ranking_atp_num1$Pays <- str_replace(ranking_atp_num1$Pays ,"RUS","Russie")
ranking_atp_num1$Pays <- str_replace(ranking_atp_num1$Pays ,"RWA","Rwanda")
ranking_atp_num1$Pays <- str_replace(ranking_atp_num1$Pays ,"SEN","Senegal")
ranking_atp_num1$Pays <- str_replace(ranking_atp_num1$Pays ,"SGP","Singapour")
ranking_atp_num1$Pays <- str_replace(ranking_atp_num1$Pays ,"SIN","Singapour")
ranking_atp_num1$Pays <- str_replace(ranking_atp_num1$Pays ,"SLE","Sierra Leone")
ranking_atp_num1$Pays <- str_replace(ranking_atp_num1$Pays ,"SLO","Slovenie")
ranking_atp_num1$Pays <- str_replace(ranking_atp_num1$Pays ,"SMR","San Marin")
ranking_atp_num1$Pays <- str_replace(ranking_atp_num1$Pays ,"SOL","Iles Salomons")
ranking_atp_num1$Pays <- str_replace(ranking_atp_num1$Pays ,"SRB","Serbie")
ranking_atp_num1$Pays <- str_replace(ranking_atp_num1$Pays ,"SRI","Sri Lanka")
ranking_atp_num1$Pays <- str_replace(ranking_atp_num1$Pays ,"SUD","Soudan")
ranking_atp_num1$Pays <- str_replace(ranking_atp_num1$Pays ,"SUI","Suisse")
ranking_atp_num1$Pays <- str_replace(ranking_atp_num1$Pays ,"SVK","Slovaquie")
ranking_atp_num1$Pays <- str_replace(ranking_atp_num1$Pays ,"SWE","Suede")
ranking_atp_num1$Pays <- str_replace(ranking_atp_num1$Pays ,"SYR","Syrie")
ranking_atp_num1$Pays <- str_replace(ranking_atp_num1$Pays ,"TAN","Tanzanie")
ranking_atp_num1$Pays <- str_replace(ranking_atp_num1$Pays ,"THA","Thailande")
ranking_atp_num1$Pays <- str_replace(ranking_atp_num1$Pays ,"TJK","Tadjikistan")
ranking_atp_num1$Pays <- str_replace(ranking_atp_num1$Pays ,"TKM","Turkmenistan")
ranking_atp_num1$Pays <- str_replace(ranking_atp_num1$Pays ,"TOG","Togo")
ranking_atp_num1$Pays <- str_replace(ranking_atp_num1$Pays ,"TPE","Taipei")
ranking_atp_num1$Pays <- str_replace(ranking_atp_num1$Pays ,"TTO","Trinidad et Tobago")
ranking_atp_num1$Pays <- str_replace(ranking_atp_num1$Pays ,"TUN","Tunisie")
ranking_atp_num1$Pays <- str_replace(ranking_atp_num1$Pays ,"TUR","Turquie")
ranking_atp_num1$Pays <- str_replace(ranking_atp_num1$Pays ,"UAE","Emirats Arabes Unis")
ranking_atp_num1$Pays <- str_replace(ranking_atp_num1$Pays ,"UGA","Ouganda")
ranking_atp_num1$Pays <- str_replace(ranking_atp_num1$Pays ,"UKR","Ukraine")
ranking_atp_num1$Pays <- str_replace(ranking_atp_num1$Pays ,"URU","Uruguay")
ranking_atp_num1$Pays <- str_replace(ranking_atp_num1$Pays ,"USA","Etats-Unis")
ranking_atp_num1$Pays <- str_replace(ranking_atp_num1$Pays ,"UZB","Ouzbekistan")
ranking_atp_num1$Pays <- str_replace(ranking_atp_num1$Pays ,"VEN","Venezuela")
ranking_atp_num1$Pays <- str_replace(ranking_atp_num1$Pays ,"VIE","Vietnam")
ranking_atp_num1$Pays <- str_replace(ranking_atp_num1$Pays ,"YUG","Yougoslavie")
ranking_atp_num1$Pays <- str_replace(ranking_atp_num1$Pays ,"ZIM","Zimbabwe")
#Saving for the app
write_rds(ranking_atp_num1, "ranking_atp_num1.rds")
golem::run_dev()
